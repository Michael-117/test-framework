version: '3.8'

services:
  selenium-tests:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # Override versions if needed
        # SELENIUM_NODE_CHROME_VERSION: 4.27.0-20241218
        # SELENIUM_SIDE_RUNNER_VERSION: 4.0.0
    container_name: selenium-test-runner
    environment:
      - TEST_PATH=${TEST_PATH:-/tests}
      - BASE_URL=${BASE_URL:-}
    volumes:
      # Mount your local tests directory
      - ${TEST_PATH:-./tests}:/tests:ro
      # Mount your local application (if needed for network access)
      # Uncomment and adjust if your app runs in another container
      # - ./app:/app:ro
    network_mode: "host"
    # Use host network mode to access localhost applications
    # Alternative: use bridge network and set extra_hosts if needed
    # extra_hosts:
    #   - "host.docker.internal:host-gateway"
    # Required for Chrome to work properly in Docker
    shm_size: 2g
    stdin_open: true
    tty: true
